(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-limiteseckill-limiteseckill"],{1791:function(t,e,i){"use strict";i("6a54");var o=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var n=o(i("f208")),s={props:{num:{type:[Number,String],default:0},max:{type:Number,default:99},index:{type:[Number,String]}},components:{CountInput:n.default},data:function(){return{number:this.num}},computed:{Max:function(){return this.max}},created:function(){},methods:{add:function(){0!=Number(this.max)?(this.number=1,this.$emit("change",{index:this.index,value:1})):uni.showToast({title:"超过最大购买限制",icon:"none"})},change:function(t){this.number=t,this.$emit("change",{index:this.index,value:t})}}};e.default=s},"1c3d":function(t,e,i){"use strict";var o=i("f657"),n=i.n(o);n.a},"40bc":function(t,e,i){"use strict";i.r(e);var o=i("8233"),n=i.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},"6a35":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.number<=0?i("v-uni-view",{staticClass:"addShopCar",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add.apply(void 0,arguments)}}},[t._v("马上抢")]):i("v-uni-view",{staticClass:"count"},[i("count-input",{staticClass:"item",attrs:{value:t.number,max:t.Max},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}})],1)},n=[]},"7cd1":function(t,e,i){"use strict";var o=i("a2be"),n=i.n(o);n.a},8233:function(t,e,i){"use strict";i("6a54");var o=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("9b1b"));i("fd3c"),i("64aa"),i("5c47"),i("e966"),i("c223"),i("bf0f"),i("2797"),i("aa9c");var s=o(i("480a")),a=o(i("d186")),r=o(i("19e1")),d=i("8f59"),c={data:function(){return{scrollLeft:0,seckillList:[],seckillGoodsList:[],goodsNum:0,goodsPrice:"0.00",currentId:-1,countDownDate:{hours:"00",minutes:"00",seconds:"00"},currentHours:(new Date).getHours(),pullStatus:"more",downStatus:"more",page:1}},onLoad:function(){var t=this;this.uid>0&&(this.countTime(),this.$http({url:"/api/goods/limit_sale_time",data:{},success:function(e){200==e.code&&(e.data.map((function(e,i){e.id=i+1,t.currentHours>=Number(e.begin_sales_time)&&t.currentHours<Number(e.end_sales_time)&&(t.currentId=e.id)})),t.seckillList=e.data,""==t.currentId?setTimeout((function(){t.scrollCurrent(t.seckillList[t.seckillList.length-1].id),t.getGoods(t.currentHours,1)}),0):setTimeout((function(){t.scrollCurrent(t.currentId),t.getGoods(t.currentHours,1)}),0))}}),uni.$off("hoursChange").$on("hoursChange",(function(e){t.currentHours=e,t.page=1,t.getGoods(e,1)})))},onUnload:function(){},components:{RefreshWrap:s.default,AddShopCar:a.default,ShoppingCarPendent:r.default},computed:(0,n.default)({},(0,d.mapState)(["openid","phone","shopCarData","showPjlcSwiich","sid","storeData","uid","userInfo"])),methods:(0,n.default)((0,n.default)({},(0,d.mapMutations)(["set_storeData","set_showPjlcSwiich","set_shopCarData","set_openid","set_phone","set_sid","set_uid","set_userInfo"])),{},{scrollCurrent:function(t){var e=this;if(0!=this.seckillList.length&&-1!=t){var i=uni.createSelectorQuery();i.select("#seckill".concat(t)).boundingClientRect((function(t){var i=uni.getSystemInfoSync().screenWidth,o=t.left;o>=i/2&&(e.scrollLeft=o-100)})).exec()}},getSeckillStatus:function(t){var e=(new Date).getHours(),i=Number(t.begin_sales_time),o=Number(t.end_sales_time);return e>=i&&e<o?"正在秒杀":e<i?"即将开始":e>=o?"已结束":void 0},countTime:function(){var t=this;this.timer&&clearInterval(this.timer);var e=(new Date).getTime()+36e5;this.timer=setInterval((function(){var i=+new Date,o=parseInt((e-i)/1e3);o<0&&(o=0,clearInterval(t.timer));var n=parseInt(o/3600);n<10&&(n="0"+n);var s=parseInt(o%3600/60);s<10&&(s="0"+s);var a=o%3600%60;a<10&&(a="0"+a),t.countDownDate.hours=n,t.countDownDate.minutes=s,t.countDownDate.seconds=a}),1e3)},getGoods:function(t,e,i,o){var n=this;this.$http({url:"/api/goods/limit_time_sell",method:"POST",data:{btime:t,page:e},success:function(t){"function"==typeof o&&o(),200==t.status&&(n.seckillGoodsList=1==e?t.data.list:n.seckillGoodsList.concat(t.data.list),"down"!=i&&(e>=t.data.pageAll?setTimeout((function(){n.$refs["refresh"]&&(n.$refs["refresh"].pullStatus="noMore")}),500):setTimeout((function(){n.$refs["refresh"]&&(n.$refs["refresh"].pullStatus="more")}),500)),n.page++)},error:function(){"function"==typeof o&&o()}})},downRefresh:function(){this.page=1,this.getGoods(this.currentHours,1,"down",(function(){setTimeout((function(){uni.$emit("loaded",{page:"category",type:"down"})}),800)}))},pullLoad:function(){this.getGoods(this.currentId,this.page,"",(function(){setTimeout((function(){uni.$emit("loaded",{page:"category",type:"pull"})}),800)}))},change:function(t){this.seckillGoodsList[t.index].userBuy=t.value;var e=0,i=0;this.seckillGoodsList.forEach((function(t){t.userBuy&&(e+=Number(t.userBuy)*Number(t.goods_price),i+=Number(t.userBuy))})),this.goodsPrice=e.twoFixed(),this.goodsNum=i},checkShopCar:function(){var t=this;if(1==this.storeData.is_open)uni.showModal({title:"温馨提示",content:"该门店已经过了营业时间，我们将在次日为您配送~",showCancel:!0,success:function(t){var e=this;if(!t.cancel&&t.confirm){var i=[];if(this.seckillGoodsList.forEach((function(t,o){t.userBuy&&t.userBuy>0&&i.push({id:t.id,goods_id:t.id,spec_id:t.spec_id,img:t.img,goods_name:t.goods_name,goods_price:t.goods_price,goods_cart_num:t.userBuy,label_name:t.label_name}),e.seckillGoodsList[o].userBuy=0})),i.length<=0)return void uni.showToast({title:"请选择要结算的商品~",icon:"none"});console.log(i,"shopkill");var o={goods:i,confirmType:"kill",goodsNum:this.goodsNum,goodsPrice:this.goodsPrice};this.set_currentOrder(o),uni.navigateTo({url:"/pages/OrderConfirm/OrderConfirm"})}}});else{var e=[];if(this.seckillGoodsList.forEach((function(i,o){i.userBuy&&i.userBuy>0&&e.push({id:i.id,goods_id:i.id,spec_id:i.spec_id,img:i.img,goods_name:i.goods_name,goods_price:i.goods_price,goods_cart_num:i.userBuy,label_name:i.label_name}),t.seckillGoodsList[o].userBuy=0})),e.length<=0)return void uni.showToast({title:"请选择要结算的商品~",icon:"none"});console.log(e,"shopkill");var i={goods:e,confirmType:"kill",goodsNum:this.goodsNum,goodsPrice:this.goodsPrice};this.set_currentOrder(i),uni.navigateTo({url:"/pages/OrderConfirm/OrderConfirm"})}}})};e.default=c},9289:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"wrap"},[i("v-uni-scroll-view",{staticClass:"seckillList noScrollBar",attrs:{"scroll-x":!0,"scroll-left":t.scrollLeft,"show-scrollbar":!1}},[t._l(t.seckillList,(function(e){return[i("v-uni-view",{key:e.id,staticClass:"item",class:{active:e.id==t.currentId},attrs:{id:"seckill"+e.id}},[i("v-uni-text",{staticClass:"time"},[t._v(t._s(e.begin_sales_time+":00"))]),i("v-uni-text",{staticClass:"status"},[t._v(t._s(t.getSeckillStatus(e)))])],1)]}))],2),t.seckillGoodsList&&t.seckillGoodsList.length>0?i("v-uni-view",{staticClass:"goodsList"},[i("refresh-wrap",{ref:"refresh",on:{downRefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.downRefresh.apply(void 0,arguments)},pullLoad:function(e){arguments[0]=e=t.$handleEvent(e),t.pullLoad.apply(void 0,arguments)}}},[t._l(t.seckillGoodsList,(function(e,o){return[i("v-uni-view",{key:e.id,staticClass:"goodsItem"},[i("v-uni-view",{staticClass:"wrap"},[i("v-uni-image",{staticClass:"goodsPic",attrs:{src:e.img,mode:"scaleToFill"}}),i("v-uni-view",{staticClass:"info"},[i("v-uni-text",{staticClass:"name text"},[t._v(t._s(e.goods_name))]),i("v-uni-text",{staticClass:"type text"},[t._v(t._s(e.label_name))]),i("v-uni-view",{staticClass:"price"},[i("v-uni-text",{staticClass:"active"},[t._v("￥"+t._s(e.goods_price))]),i("v-uni-text",{staticClass:"old"},[t._v("￥"+t._s(e.ys_price))])],1),e.goods_num<12&&e.goods_num>0?i("v-uni-text",{staticClass:"num text"},[t._v("有库存")]):0==e.goods_num?i("v-uni-text",{staticClass:"num text"},[t._v("库存：0")]):i("v-uni-text",{staticClass:"num text"},[t._v("库存充足")])],1),i("add-shop-car",{staticClass:"addBtn",attrs:{index:o,max:Math.min(e.goods_num,e.onebuy)},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}})],1)],1)]}))],2)],1):i("v-uni-view",{staticClass:"goodsList"},[i("v-uni-view",{staticClass:"none"},[t._v("当前时间暂无秒杀活动商品，请耐心等待~")])],1),i("shopping-car-pendent",{staticClass:"pendent",attrs:{num:t.goodsNum,price:t.goodsPrice},on:{checkShopCar:function(e){arguments[0]=e=t.$handleEvent(e),t.checkShopCar.apply(void 0,arguments)}}})],1)},n=[]},"9ff6":function(t,e,i){var o=i("c86c");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 黑色加粗字体 */\n/* 单行文本溢出省略 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.wrap[data-v-32481140]{position:relative;width:100%;height:100vh}.wrap .seckillList[data-v-32481140]{height:%?144?%;width:%?750?%;padding:%?10?%;box-sizing:border-box;white-space:nowrap;overflow:hidden;z-index:2;transition:.2s}.wrap .seckillList .item[data-v-32481140]{width:%?120?%;margin-right:%?20?%;height:%?95?%;border-radius:%?10?%;background:#fff;color:#333;border:%?2?% solid #ccc;flex-shrink:0;color:#333;padding:%?10?% 0;display:inline-block}.wrap .seckillList .item .time[data-v-32481140]{font-size:%?30?%;display:block;text-align:center}.wrap .seckillList .item .status[data-v-32481140]{font-size:%?24?%;display:block;text-align:center}.wrap .seckillList .item[data-v-32481140]:nth-last-child(1){margin-right:0}.wrap .seckillList .active[data-v-32481140]{color:#fff;background:#ff5299;border:0;position:relative}.wrap .seckillList .active[data-v-32481140]::after{width:0;height:0;position:absolute;content:"";border:%?10?% solid transparent;border-top-color:#ff5299;left:0;right:0;bottom:%?-15?%;margin:auto}.wrap .countdown[data-v-32481140]{width:100%;height:%?125?%;display:flex;justify-content:center;align-items:center;font-size:%?36?%;background:#f6f6f6;color:#000;font-weight:600;position:absolute;z-index:20;top:%?120?%}.wrap .countdown .time[data-v-32481140]{width:%?180?%;height:%?40?%;display:flex;justify-content:space-between}.wrap .countdown .time .item[data-v-32481140]{width:%?40?%;height:%?40?%;border-radius:%?10?%;background:#000;font-size:%?20?%;color:#fff;display:flex;justify-content:center;align-items:center}.wrap .countdown .time .text[data-v-32481140]{font-size:%?26?%;color:#666}.wrap .goodsList[data-v-32481140]{position:absolute;top:%?120?%;bottom:0;left:0;right:0;margin:auto}.wrap .goodsList .none[data-v-32481140]{font-size:%?30?%;color:#ccc;text-align:center;margin-top:%?100?%}.wrap .goodsList .goodsItem[data-v-32481140]{width:100%;height:%?250?%;padding:%?30?% %?35?%}.wrap .goodsList .goodsItem .wrap[data-v-32481140]{width:100%;height:100%;display:flex;border-bottom:%?2?% dashed #eee;position:relative}.wrap .goodsList .goodsItem .wrap .goodsPic[data-v-32481140]{width:%?140?%;height:%?140?%;border-radius:%?30?%}.wrap .goodsList .goodsItem .wrap .info[data-v-32481140]{width:%?550?%;padding-left:%?30?%;height:100%;display:flex;flex-direction:column}.wrap .goodsList .goodsItem .wrap .info .text[data-v-32481140]{display:block;width:%?360?%;margin-bottom:%?15?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrap .goodsList .goodsItem .wrap .info .name[data-v-32481140]{width:100%;font-size:%?30?%;color:#000;font-weight:600}.wrap .goodsList .goodsItem .wrap .info .type[data-v-32481140]{color:#999;font-size:%?22?%}.wrap .goodsList .goodsItem .wrap .info .price[data-v-32481140]{display:flex;align-items:flex-end;margin-bottom:%?10?%}.wrap .goodsList .goodsItem .wrap .info .price .active[data-v-32481140]{font-size:%?28?%;color:#fa6244;margin-right:%?10?%}.wrap .goodsList .goodsItem .wrap .info .price .old[data-v-32481140]{color:#999;font-size:%?20?%;text-decoration:line-through;padding-bottom:%?2?%}.wrap .goodsList .goodsItem .wrap .info .num[data-v-32481140]{font-size:%?22?%;color:#d00317}.wrap .goodsList .goodsItem .wrap .addBtn[data-v-32481140]{position:absolute;top:%?50?%;right:0}.wrap .pendent[data-v-32481140]{position:fixed;bottom:0;left:0;right:0;margin:auto}',""]),t.exports=e},a2be:function(t,e,i){var o=i("9ff6");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("967d").default;n("12839066",o,!0,{sourceMap:!1,shadowMode:!1})},d186:function(t,e,i){"use strict";i.r(e);var o=i("6a35"),n=i("d3ac");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("1c3d");var a=i("828b"),r=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,"7d73c693",null,!1,o["a"],void 0);e["default"]=r.exports},d3ac:function(t,e,i){"use strict";i.r(e);var o=i("1791"),n=i.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},f48c:function(t,e,i){"use strict";i.r(e);var o=i("9289"),n=i("40bc");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("7cd1");var a=i("828b"),r=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,"32481140",null,!1,o["a"],void 0);e["default"]=r.exports},f657:function(t,e,i){var o=i("ffdf");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("967d").default;n("3ec1a75d",o,!0,{sourceMap:!1,shadowMode:!1})},ffdf:function(t,e,i){var o=i("c86c");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 黑色加粗字体 */\n/* 单行文本溢出省略 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.addShopCar[data-v-7d73c693]{width:%?162?%;height:%?62?%;border-radius:%?31?%;background:linear-gradient(0deg,#fc671c,#ff3b2e);color:#fff;font-size:%?26?%;line-height:%?62?%;text-align:center;box-shadow:0 %?3?% %?15?% %?3?% rgba(255,121,88,.32)}.addShopCar[data-v-7d73c693]:active{background:linear-gradient(180deg,#fc671c,#ff3b2e);box-shadow:0 %?3?% %?10?% %?0?% rgba(0,0,0,.3) inset}.count[data-v-7d73c693]{width:%?162?%;height:%?62?%;position:relative}.count .item[data-v-7d73c693]{position:absolute;right:%?-40?%;bottom:%?-35?%}',""]),t.exports=e}}]);