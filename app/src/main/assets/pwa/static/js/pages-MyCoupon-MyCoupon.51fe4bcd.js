(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-MyCoupon-MyCoupon"],{"36c3":function(e,t,i){"use strict";i.r(t);var n=i("ee29"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},3832:function(e,t,i){"use strict";var n=i("7c9c"),a=i.n(n);a.a},"7c9c":function(e,t,i){var n=i("d2fa");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("61df5418",n,!0,{sourceMap:!1,shadowMode:!1})},a0d6:function(e,t,i){"use strict";i.r(t);var n=i("db9f"),a=i("36c3");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("3832");var s=i("828b"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"03b66ed2",null,!1,n["a"],void 0);t["default"]=c.exports},d2fa:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 黑色加粗字体 */\n/* 单行文本溢出省略 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.coupon[data-v-03b66ed2]{width:100%;min-height:100vh;background:#fff;overflow-x:hidden;padding:%?50?% %?30?%;display:flex;background:#f6f6f6;flex-direction:column;align-items:center}.coupon .item[data-v-03b66ed2]{width:100%}.xia[data-v-03b66ed2]{display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.1);padding:%?40?% 0 %?12?%;margin:0 %?30?% %?34?%}.xia uni-image[data-v-03b66ed2]{width:%?37?%;height:%?27?%;margin-right:%?16?%}.xia uni-text[data-v-03b66ed2]{font-size:%?34?%}.xia_list[data-v-03b66ed2]{width:%?656?%;border-radius:%?20?%;background:#fff;align-items:center;padding:%?20?% %?36?%;box-sizing:border-box;box-shadow:2px %?2?% %?30?% rgba(0,0,0,.1);margin:0 auto %?16?%}.xia_list .coupon-name[data-v-03b66ed2]{font-size:%?28?%}.xia_list .xia_flex[data-v-03b66ed2]{display:flex;align-items:center;justify-content:space-between}.xia_list .xia_flex .money[data-v-03b66ed2]{color:#ff7000}.xia_list .xia_flex .money .money_1[data-v-03b66ed2]{font-size:%?32?%;margin-right:%?10?%}.xia_list .xia_flex .money .money_2[data-v-03b66ed2]{font-size:%?70?%}.xia_list .xia_flex .currency[data-v-03b66ed2]{font-size:%?32?%}.xia_list .xia_flex .now[data-v-03b66ed2]{width:%?188?%;height:%?71?%;background:#f85025;color:#fff;font-size:%?36?%;display:flex;align-items:center;justify-content:center;border-radius:%?36?%}.xia_list .xia_flex .selectbtn[data-v-03b66ed2]{background:#4caf50}.xia_list .xia_flex .now_gq[data-v-03b66ed2]{width:%?188?%;height:%?71?%;background:#b3a9a7;color:#fff;font-size:%?22?%;display:flex;align-items:center;justify-content:center;border-radius:%?36?%}.xia_list .xia_flex .nouse[data-v-03b66ed2]{background:#ccc}.xia_list .reduction[data-v-03b66ed2],\n.xia_list .expire[data-v-03b66ed2]{font-size:%?26?%;line-height:%?40?%;color:#a2a6b3}.confirmdiv[data-v-03b66ed2]{position:fixed;bottom:0;left:0;right:0;width:100%;height:%?160?%;display:flex;justify-content:center;align-items:center}.confirmdiv .now[data-v-03b66ed2]{width:%?188?%;height:%?71?%;background:#f85025;color:#fff;font-size:%?36?%;display:flex;align-items:center;justify-content:center;border-radius:%?36?%}.confirmdiv .selectbtn[data-v-03b66ed2]{background:#4caf50}',""]),e.exports=t},db9f:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"coupon"},[e._l(e.couponList,(function(t,n){return[i("v-uni-view",{key:t.id,staticClass:"xia_list"},[i("v-uni-view",{staticClass:"coupon-name"},[e._v(e._s(t.coupon_name))]),i("v-uni-view",{staticClass:"xia_flex"},[i("v-uni-view",{staticClass:"money"},[i("v-uni-text",{staticClass:"money_1"},[e._v("¥")]),i("v-uni-text",{staticClass:"money_2"},[e._v(e._s(t.coupon_money))])],1),i("v-uni-view",{staticClass:"currency"},[e._v(e._s(t.coupon_mode))]),1==e.isSelect?[1==t.isUse?[i("v-uni-checkbox",{attrs:{value:t.id,checked:t.checked},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.changeChecked(n)}}})]:i("v-uni-view",{staticClass:"now nouse"},[e._v("不可使用")])]:[t.state?i("v-uni-view",{staticClass:"now_gq"},[e._v(e._s(t.state))]):e._e(),t.is_user?i("v-uni-view",{staticClass:"now_gq"},[e._v(e._s(t.use_time)+"已用")]):t.state||0!==t.is_user?e._e():i("v-uni-view",{staticClass:"now",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.router(t.id)}}},[e._v("去使用")])]],2),i("v-uni-view",{staticClass:"reduction"},[e._v(e._s(t.description))]),i("v-uni-view",{staticClass:"expire"},[e._v("有效时间："+e._s(t.expire_time_start)+" 至 "+e._s(t.expire_time_end))])],1)]})),i("v-uni-view",{staticStyle:{height:"160rpx"}}),1==e.isSelect?i("v-uni-view",{staticClass:"confirmdiv"},[i("v-uni-view",{staticClass:"now",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancelUseNew()}}},[e._v("取消")]),i("v-uni-view",{staticStyle:{width:"40rpx"}}),i("v-uni-view",{staticClass:"now selectbtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.useAll()}}},[e._v("全选")]),i("v-uni-view",{staticStyle:{width:"40rpx"}}),i("v-uni-view",{staticClass:"now selectbtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.useNew()}}},[e._v("选择")])],1):e._e()],2)},a=[]},ee29:function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("9b1b")),o=n(i("39d8"));i("64aa"),i("fd3c"),i("3efd"),i("aa9c"),i("c223");var s=i("8f59"),c={data:function(){return{couponList:[],isSelect:!1,did:{},goodsidArr:"",quantity:""}},onLoad:function(e){if("orderconfirm"==e.from&&(this.isSelect=!0,this.usePrice=Number(e.price),e.did)){for(var t=e.did.split(","),i={},n=0;n<t.length;n++)i[t[n]]=!0;this.did=i}this.goodsidArr=e.goodsidArr||"",this.quantity=e.quantity||""},onShow:function(){var e,t=this,i=this.isSelect?1:0;this.$http((e={method:"POST",url:"/Ashx/Ashx_Pub.ashx?Develop_Code=178293102820&Function=Procedure",data:{InputValue:{isSelect:i,goodsidArr:this.goodsidArr,quantity:this.quantity},InputName:"InputValue",ProcedureName:"my_coupon"}},(0,o.default)(e,"method","POST"),(0,o.default)(e,"success",(function(e){if(200==e.ReturnValue.code&&(t.couponList=e.ReturnValue.data,1==t.isSelect)){var i=[];t.couponList.map((function(e){t.$set(e,"checked",!1),t.did[e.id]&&t.$set(e,"checked",!0),Number(e.satisfy_money)<=t.usePrice?(t.$set(e,"isUse",!0),i.unshift(e)):(t.$set(e,"isUse",!1),i.push(e))})),t.couponList=i}})),e))},computed:(0,a.default)({},(0,s.mapState)(["openid","phone","shopCarData","showPjlcSwiich","sid","storeData","uid","userInfo","currentOrder","NotInAnYang"])),methods:(0,a.default)((0,a.default)({},(0,s.mapMutations)(["set_storeData","set_showPjlcSwiich","set_shopCarData","set_openid","set_phone","set_sid","set_uid","set_userInfo","set_currentOrder"])),{},{router:function(e){var t=this;this.$http({url:"/Ashx/Ashx_Pub.ashx?Develop_Code=178293102820&Function=Procedure",data:{InputValue:{did:e},InputName:"InputValue",ProcedureName:"Proc_use_coupon_btn"},method:"POST",success:function(i){"使用优惠券"==i.ReturnValue.modelName&&i.ReturnValue.GoodsItem?(t.set_currentOrder(i.ReturnValue.GoodsItem),i.ReturnValue.yhqArr&&(getApp().globalData.proc_youhuiquan=i.ReturnValue.yhqArr),uni.navigateTo({url:i.ReturnValue.url})):uni.navigateTo({url:"/pages/MyCoupon/useCoupon?coupon_id="+e})},error:function(e){uni.showToast({title:"请检查网络~",icon:"none"})}})},useAll:function(){var e=this,t=[],i=0;this.couponList.map((function(n){!0===n.isUse&&(i+=n.coupon_money,i<e.usePrice?e.did[n.id]||e.$set(n,"checked",!0):e.$set(n,"checked",!1)),t.unshift(n)})),this.couponList=t,this.useNew()},useNew:function(){var e=0,t={};if(this.couponList.map((function(i){i.checked&&(t[i.did]=!0,e+=i.coupon_money)})),e>this.usePrice)uni.showToast({title:"优惠券大于订单金额！",icon:"none"});else{this.did=t;var i=[];this.couponList.map((function(e){e.checked&&i.push({did:e.id,couponData:"满".concat(e.satisfy_money,"减").concat(e.coupon_money),dicount:e.coupon_money})})),uni.$emit("selectCoupon",i),uni.navigateBack({})}},cancelUseNew:function(){uni.$emit("cancelCoupon",{}),uni.navigateBack({})},changeChecked:function(e){this.couponList[e].checked=!this.couponList[e].checked}})};t.default=c}}]);